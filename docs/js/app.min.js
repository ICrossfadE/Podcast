(()=>{"use strict";async function e(e,t){const i=document.querySelector(".audio-player-art").children[0],n=document.querySelector(".audio-author"),r=document.querySelector(".audio-theme"),a=document.querySelector(".audio-episode"),o=document.querySelector(".audio-content"),s=document.querySelector(".audio-time"),l=document.querySelector(".volume-slider"),c=document.querySelector(".progress-line"),d=document.querySelector(".total-duration");i.src=`./img/img/author/${e.details.img}.jpg`,n.innerHTML=e.details.author,r.innerHTML=e.details.title,a.innerHTML=`Episode ${e.details.episode} - Season ${e.details.season}`,o.src=`./audio/${e.details.audioSrc}.mp3`,o.addEventListener("loadeddata",(e=>{const{duration:i,currentTime:n}=e.target;let r=Math.floor(i/60),a=Math.floor(i-60*r);a<10&&(a="0"+a),c.value=n,s.innerHTML=`${r}:${a}`,d.innerHTML=`${r}:${a}`,l.addEventListener("input",(()=>{t(o,l)}))}))}function t(e,t,i){const n=i.querySelector(".playpause-track"),r=i.querySelector(".ri-play-fill");let a=e;n.addEventListener("click",(()=>{a?(t.pause(),a=!1,r.classList.contains("ri-pause-line")&&(r.classList.toggle("ri-play-fill"),r.classList.toggle("ri-pause-line"))):(t.play(),a=!0,r.classList.contains("ri-play-fill")&&(r.classList.toggle("ri-play-fill"),r.classList.toggle("ri-pause-line")))}))}function i(e,t){e.volume=t.value/100}let n={audioStartIndex:9,isPlaying:!1,isRandom:!1,data:[]};class r{constructor(e,t,i,n,r,a,o){this.theme=e,this.title=t,this.episode=i,this.season=n,this.img=r,this.audioSrc=a,this.parent=o}render(){const e=document.createElement("div");e.classList.add("list-item"),e.innerHTML=`\n    <div class="item-audio-art">\n        <img src="./img/img/author/${this.img}.jpg" alt="author" />\n    </div>\n\n    <div class="description">\n        <p class="item-theme">${this.title}</p>\n        <p class="item-episode">Episode ${this.episode} - Season ${this.season}</p>\n\n        <div class="item-audio-timeline">\n            <div class="current-item-time">0:00</div>\n            <div class="progress-item-wrapper">\n                <div class="progress-item-line"></div>\n            </div>\n            <div class="total-item-duration">0:00</div>\n            </div>\n            <audio class="item-audio-content" src="./audio/${this.audioSrc}.mp3"></audio>\n        </div>\n\n        <div class="item-navigation">\n        <div class="playpause-track">\n            <i class="ri-play-fill"></i>\n        </div>\n        <div class="next-track">\n            <i class="ri-skip-right-fill"></i>\n        </div>\n    </div>\n    `,this.parent.append(e),this.setDurationTime(),this.playPause(),this.updateProgress()}setDurationTime(){const e=this.parent.lastChild,t=e.querySelector(".item-audio-content"),i=e.querySelector(".progress-item-line"),n=e.querySelector(".total-item-duration");t.addEventListener("loadeddata",(e=>{const{duration:t,currentTime:r}=e.target;let a=Math.floor(t/60),o=Math.floor(t-60*a);o<10&&(o="0"+o),i.value=r,n.innerHTML=`${a}:${o}`}))}playPause(){const e=this.parent.lastChild,t=e.querySelector(".item-audio-content"),i=e.querySelector(".playpause-track"),n=e.querySelector(".ri-play-fill");let r=!1;i.addEventListener("click",(()=>{r?(t.pause(),r=!1,n.classList.contains("ri-pause-line")&&(n.classList.toggle("ri-play-fill"),n.classList.toggle("ri-pause-line"))):(t.play(),r=!0,n.classList.contains("ri-play-fill")&&(n.classList.toggle("ri-play-fill"),n.classList.toggle("ri-pause-line")))}))}updateProgress(){const e=this.parent.lastChild;let t=e.querySelector(".current-item-time");const i=e.querySelector(".progress-item-line"),n=e.querySelector(".progress-item-wrapper"),r=e.querySelector(".item-audio-content");r.addEventListener("timeupdate",(function(e){const{duration:n,currentTime:r}=e.target;let a=Math.floor(r/60),o=Math.floor(r-60*a);o<10&&(o="0"+o);let s=0;s=r/n*100,i.style.width=`${s}%`,t.innerHTML=`${a}:${o}`})),n.addEventListener("click",(function(e){const t=this.clientWidth,i=e.offsetX,n=r.duration;r.currentTime=i/t*n}))}}function a(e,t,i){e.forEach((e=>{new t(e.theme.theme,e.details.title,e.details.episode,e.details.season,e.details.img,e.details.audioSrc,i).render()}))}function o(e,t){return e.filter((e=>e.theme==t))}const s=document.querySelector(".audio-content"),l=document.querySelector(".intro-audio-content"),c=document.querySelector(".audio-player__container"),d=document.querySelector(".popular__container"),u=document.querySelector(".explore-more-list");document.addEventListener("DOMContentLoaded",(async function(){try{n.data=await async function(){try{const e=await fetch("https://server-podcast.fly.dev/get-json");if(!e.ok)throw new Error("Помилка HTTP: "+e.status);return await e.json()}catch(e){console.error("Помилка:",e)}}(),function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=1==e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),function(){const e=document.querySelector("#header-menu"),t=document.querySelector(".ri-menu-line"),i=document.querySelector(".header-nav");e.onclick=()=>{i.classList.toggle("open"),t.classList.toggle("ri-menu-line"),t.classList.toggle("ri-close-line")}}(),function(e,t,i,n,r){const a=document.querySelector(".navbar"),o=document.querySelectorAll("li");let s=e;function l(e,t,n){for(;n.firstChild;)n.removeChild(n.firstChild);i(e,t,n)}a.addEventListener("click",(i=>{let a=i.target;var c;o.forEach((e=>{e.classList.remove("active")})),a.classList.add("active"),"all"==a.id?l(e,n,r):(c=a.id,s=t(e,c),l(s,n,r))}))}(n.data,o,a,r,u),window.addEventListener("load",(()=>{!function(e){const t=document.querySelector(".intro-audio-time");e.src="./audio/Becca-Luna.mp3",e.addEventListener("loadeddata",(e=>{const{duration:i}=e.target;let n=Math.floor(i/60),r=Math.floor(i-60*n);r<10&&(r="0"+r),t.innerHTML=`Desert - ${n}:${r}`}))}(l),e(n.data[n.audioStartIndex],i),a(n.data,r,u)})),t(n.isPlaying,s,c),t(n.isPlaying,l,d),function(e,t,i){const n=document.querySelector(".audio-btn-next"),r=document.querySelector(".audio-btn-prev"),a=document.querySelector(".next-track"),o=document.querySelector(".prev-track"),s=document.querySelector(".ri-play-fill");function l(){++e>i.length-1&&(e=0),t(i[e]),s.classList.contains("ri-pause-line")&&(s.classList.remove("ri-pause-line"),s.classList.add("ri-play-fill"))}function c(){--e<0&&(e=i.length-1),t(i[e]),s.classList.contains("ri-pause-fill")&&(s.classList.remove("ri-pause-line"),s.classList.add("ri-play-fill"))}r.addEventListener("click",c),n.addEventListener("click",l),o.addEventListener("click",c),a.addEventListener("click",l)}(n.audioStartIndex,e,n.data),function(e){let t=document.querySelector(".current-time");const i=document.querySelector(".progress-line"),n=document.querySelector(".progress-wrapper");e.addEventListener("timeupdate",(function(e){const{duration:n,currentTime:r}=e.target;let a=Math.floor(r/60),o=Math.floor(r-60*a);o<10&&(o="0"+o);let s=0;s=r/n*100,i.style.width=`${s}%`,t.innerHTML=`${a}:${o}`})),n.addEventListener("click",(function(t){const i=this.clientWidth,n=t.offsetX,r=e.duration;e.currentTime=n/i*r}))}(s)}catch(e){console.error("Помилка:",e)}}))})();